#!/usr/bin/env python2.7
"""
Select a repo via demenu and sync.
"""

import os
import sys
from subprocess import check_output, call

def main():
    xs = sys.argv[1:]
    xs = {os.path.basename(x): x for x in xs}

    params = "\\n".join(xs)
    cmd = "echo -e '{}' | dmenu".format(params)
    sel = check_output(cmd, shell=True)
    sel = sel.strip()

    if sel not in xs:
        print "{} not a known repository!".format(sel)
        sys.exit(1)

    cmd = "repo-sync '{}'".format(xs[sel])
    call(cmd, shell=True)

if __name__ == '__main__':
    main()
