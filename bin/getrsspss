#!/usr/bin/env python2
"""
Get the PSS and RSS of a PID.
"""

import sys

unit_dict = {
    "kB": 2 ** 10,
    "mB": 2 ** 20,
    "gB": 2 ** 30,
}

def main():
    try:
        _, pid = sys.argv
        pid = int(pid)
    except (ValueError, TypeError):
        print("Usage: getrsspss PID")
        sys.exit(1)

    rss = 0
    pss = 0
    with open("/proc/%d/smaps" % pid) as fobj:
        for line in fobj:
            if line.startswith("Rss:"):
                _, num, unit = line.split()
                rss += int(num) * unit_dict[unit]
            if line.startswith("Pss:"):
                _, num, unit = line.split()
                pss += int(num) * unit_dict[unit]

    print "Rss:", round(rss / 2 ** 20, 2), "MB"
    print "Pss:", round(pss / 2 ** 20, 2), "MB"

if __name__ == "__main__":
    main()
