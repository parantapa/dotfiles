#!/bin/bash

srcdir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
if [ -d "$1" ] ; then
	dstdir="$1"
else
	dstdir="$HOME"
fi

dotfiles=(profile bash_logout bashrc
    vimrc vim tmux.conf gitconfig cvsignore
    pylintrc Xresources latexmkrc
    pentadactylrc)

cd "$dstdir"
for file in "${dotfiles[@]}" ; do
    [ -a ".$file" ] && rm -i ".$file"
    [ -a ".$file" ] || ln -s "$srcdir/$file" ".$file"
done

cd "$dstdir/.vim"
[ -d tmp ]        || mkdir tmp
[ -d tmp/backup ] || mkdir tmp/backup
[ -d tmp/undo ]   || mkdir tmp/undo
[ -d tmp/swap ]   || mkdir tmp/swap

cd "$srcdir"
git submodule sync
git submodule update --init

